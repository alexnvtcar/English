<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>–¢–µ—Å—Ç —Å–∫—Ä—ã—Ç–∏—è –±–ª–æ–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–ª—è –ú–∏—Ö–∞–∏–ª–∞</title>
    
    <!-- iOS PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Tech Block Test">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .test-section h2 {
            margin-top: 0;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .warning-box {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .warning-box h3 {
            margin-top: 0;
            color: #fca5a5;
        }
        
        .success-box {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .success-box h3 {
            margin-top: 0;
            color: #6ee7b7;
        }
        
        .test-buttons {
            text-align: center;
            margin-top: 30px;
        }
        
        .test-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0 10px;
            transition: all 0.3s ease;
        }
        
        .test-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .test-btn.primary {
            background: rgba(16, 185, 129, 0.3);
            border-color: rgba(16, 185, 129, 0.5);
        }
        
        .test-btn.danger {
            background: rgba(239, 68, 68, 0.3);
            border-color: rgba(239, 68, 68, 0.5);
        }
        
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success {
            background: #10b981;
        }
        
        .status-error {
            background: #ef4444;
        }
        
        .status-warning {
            background: #f59e0b;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîí –¢–µ—Å—Ç —Å–∫—Ä—ã—Ç–∏—è –±–ª–æ–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</h1>
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ú–∏—Ö–∞–∏–ª–∞</p>
        </div>
        
        <div class="warning-box">
            <h3>‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê</h3>
            <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å <strong>–ú–∏—Ö–∞–∏–ª</strong> –≤—Å–µ –µ—â–µ –≤–∏–¥–µ–ª –±–ª–æ–∫ "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!</p>
            <p>–ü—Ä–∏–º–µ–Ω–µ–Ω—ã <strong>–ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ï</strong> –º–µ—Ä—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–∫—Ä—ã—Ç–∏—è –±–ª–æ–∫–∞.</p>
        </div>
        
        <div class="success-box">
            <h3>‚úÖ –ü–†–ò–ú–ï–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø</h3>
            <p>–î–æ–±–∞–≤–ª–µ–Ω—ã <strong>4 —É—Ä–æ–≤–Ω—è –∑–∞—â–∏—Ç—ã</strong> –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–∫—Ä—ã—Ç–∏—è –±–ª–æ–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:</p>
        </div>
        
        <div class="test-section">
            <h2>üõ°Ô∏è –£—Ä–æ–≤–Ω–∏ –∑–∞—â–∏—Ç—ã</h2>
            
            <div class="test-section">
                <h3>1Ô∏è‚É£ JavaScript —Å–∫—Ä—ã—Ç–∏–µ –≤ applyRolePermissions()</h3>
                <div class="code-block">
// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –±–ª–æ–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
if (isViewer) {
    const techBlock = document.getElementById('techDiagnosticsBlock');
    const techDivider = document.getElementById('dividerBeforeTech');
    
    if (techBlock) {
        techBlock.style.display = 'none !important';
        techBlock.style.visibility = 'hidden !important';
        techBlock.style.height = '0 !important';
        techBlock.style.overflow = 'hidden !important';
        techBlock.style.margin = '0 !important';
        techBlock.style.padding = '0 !important';
    }
}
                </div>
            </div>
            
            <div class="test-section">
                <h3>2Ô∏è‚É£ CSS —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                <div class="code-block">
/* –°–∫—Ä—ã—Ç–∏–µ –±–ª–æ–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–ª—è –ú–∏—Ö–∞–∏–ª–∞ */
.user-mikhail #techDiagnosticsBlock,
.user-mikhail #dividerBeforeTech {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
}
                </div>
            </div>
            
            <div class="test-section">
                <h3>3Ô∏è‚É£ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–µ–Ω—é</h3>
                <div class="code-block">
// –í —Ñ—É–Ω–∫—Ü–∏–∏ toggleSettingsMenu()
if (isViewer) {
    const techBlock = document.getElementById('techDiagnosticsBlock');
    const techDivider = document.getElementById('dividerBeforeTech');
    
    if (techBlock) {
        techBlock.style.display = 'none !important';
        // ... –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
    }
}
                </div>
            </div>
            
            <div class="test-section">
                <h3>4Ô∏è‚É£ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –±–ª–æ–∫–∞</h3>
                <div class="code-block">
// –í —Ñ—É–Ω–∫—Ü–∏–∏ toggleSettingsBlock()
const isMikhail = appState.userName === '–ú–∏—Ö–∞–∏–ª';
const isTechBlock = blockTitle.textContent.trim() === '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞';

if (isMikhail && isTechBlock) {
    console.log('üö´ –ú–∏—Ö–∞–∏–ª –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –±–ª–æ–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏');
    return; // –ë–ª–æ–∫–∏—Ä—É–µ–º —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ
}
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:</p>
            
            <div class="test-buttons">
                <button class="test-btn primary" onclick="testMikhailLogin()">
                    üë§ –í–æ–π—Ç–∏ –∫–∞–∫ –ú–∏—Ö–∞–∏–ª
                </button>
                <button class="test-btn" onclick="testAdminLogin()">
                    üëë –í–æ–π—Ç–∏ –∫–∞–∫ –ê–¥–º–∏–Ω
                </button>
                <button class="test-btn" onclick="testTechBlockVisibility()">
                    üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å –±–ª–æ–∫–∞
                </button>
                <button class="test-btn danger" onclick="forceHideTechBlock()">
                    üö´ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä—ã—Ç—å –±–ª–æ–∫
                </button>
                <button class="test-btn" onclick="openMainApp()">
                    üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏</h2>
            <div id="testResults">
                <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...</p>
            </div>
        </div>
    </div>

    <script>
        function testMikhailLogin() {
            // –°–∏–º—É–ª–∏—Ä—É–µ–º –≤—Ö–æ–¥ –∫–∞–∫ –ú–∏—Ö–∞–∏–ª
            localStorage.setItem('appState', JSON.stringify({
                userName: '–ú–∏—Ö–∞–∏–ª',
                role: 'viewer',
                isInitialized: true
            }));
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–ª–∞—Å—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.body.classList.add('user-mikhail');
            
            updateTestResults('‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω –∫–∞–∫ –ú–∏—Ö–∞–∏–ª (viewer)', 'success');
            alert('‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω –∫–∞–∫ –ú–∏—Ö–∞–∏–ª (viewer)\n\n–¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –±–ª–æ–∫ "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞" –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã—Ç.');
        }
        
        function testAdminLogin() {
            // –°–∏–º—É–ª–∏—Ä—É–µ–º –≤—Ö–æ–¥ –∫–∞–∫ –ê–¥–º–∏–Ω
            localStorage.setItem('appState', JSON.stringify({
                userName: 'Admin',
                role: 'admin',
                isInitialized: true
            }));
            
            // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.body.classList.remove('user-mikhail');
            
            updateTestResults('‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω –∫–∞–∫ –ê–¥–º–∏–Ω', 'success');
            alert('‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω –∫–∞–∫ –ê–¥–º–∏–Ω\n\n–¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –≤—Å–µ –±–ª–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã.');
        }
        
        function testTechBlockVisibility() {
            const techBlock = document.getElementById('techDiagnosticsBlock');
            const techDivider = document.getElementById('dividerBeforeTech');
            
            let results = 'üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –±–ª–æ–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:\n\n';
            
            if (techBlock) {
                const computedStyle = window.getComputedStyle(techBlock);
                results += `–ë–ª–æ–∫ –Ω–∞–π–¥–µ–Ω: ‚úÖ\n`;
                results += `display: ${computedStyle.display}\n`;
                results += `visibility: ${computedStyle.visibility}\n`;
                results += `height: ${computedStyle.height}\n`;
                results += `overflow: ${computedStyle.overflow}\n`;
            } else {
                results += `–ë–ª–æ–∫ –ù–ï –Ω–∞–π–¥–µ–Ω: ‚ùå\n`;
            }
            
            if (techDivider) {
                const computedStyle = window.getComputedStyle(techDivider);
                results += `\n–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω: ‚úÖ\n`;
                results += `display: ${computedStyle.display}\n`;
                results += `visibility: ${computedStyle.visibility}\n`;
            } else {
                results += `\n–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ù–ï –Ω–∞–π–¥–µ–Ω: ‚ùå\n`;
            }
            
            updateTestResults(results, 'info');
            alert(results);
        }
        
        function forceHideTechBlock() {
            const techBlock = document.getElementById('techDiagnosticsBlock');
            const techDivider = document.getElementById('dividerBeforeTech');
            
            if (techBlock) {
                techBlock.style.display = 'none !important';
                techBlock.style.visibility = 'hidden !important';
                techBlock.style.height = '0 !important';
                techBlock.style.overflow = 'hidden !important';
                techBlock.style.margin = '0 !important';
                techBlock.style.padding = '0 !important';
            }
            
            if (techDivider) {
                techDivider.style.display = 'none !important';
                techDivider.style.visibility = 'hidden !important';
                techDivider.style.height = '0 !important';
                techDivider.style.overflow = 'hidden !important';
                techDivider.style.margin = '0 !important';
                techDivider.style.padding = '0 !important';
            }
            
            updateTestResults('üö´ –ë–ª–æ–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä—ã—Ç', 'warning');
            alert('üö´ –ë–ª–æ–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä—ã—Ç!\n\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.');
        }
        
        function openMainApp() {
            window.location.href = './index.html';
        }
        
        function updateTestResults(message, type) {
            const resultsDiv = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString();
            const statusClass = type === 'success' ? 'status-success' : type === 'error' ? 'status-error' : 'status-warning';
            
            resultsDiv.innerHTML = `
                <div style="margin-bottom: 10px;">
                    <span class="status-indicator ${statusClass}"></span>
                    <strong>[${timestamp}]</strong> ${message}
                </div>
            ` + resultsDiv.innerHTML;
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            console.log('üîí –¢–µ—Å—Ç —Å–∫—Ä—ã—Ç–∏—è –±–ª–æ–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            const appState = localStorage.getItem('appState');
            if (appState) {
                try {
                    const state = JSON.parse(appState);
                    console.log('üë§ –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', state.userName);
                    console.log('üîë –†–æ–ª—å:', state.role);
                    
                    if (state.userName === '–ú–∏—Ö–∞–∏–ª' && state.role === 'viewer') {
                        document.body.classList.add('user-mikhail');
                        console.log('‚ö†Ô∏è –ú–∏—Ö–∞–∏–ª –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É');
                        updateTestResults('–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–ª–∞—Å—Å user-mikhail –¥–ª—è –ú–∏—Ö–∞–∏–ª–∞', 'warning');
                    }
                } catch (e) {
                    console.log('‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ appState');
                }
            } else {
                console.log('‚ÑπÔ∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω');
            }
        });
    </script>
</body>
</html>
